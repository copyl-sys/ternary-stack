# 🧠 AI_METADATA.md — Axion + HanoiVM Metadata Policy

This document defines the **structure, format, and lifecycle** of AI-generated and AI-consumed metadata within the HanoiVM and Axion runtime ecosystem. It ensures transparency, reproducibility, and safe AI refinement across all modules.

---

## 📦 Metadata Types

| File                      | Purpose                                                       |
|---------------------------|---------------------------------------------------------------|
| `axion.meta.json`         | Core metadata log (entropy, optimization decisions, rollback) |
| `entropy.json`            | Entropy trace per `.t81` or `.hvm` execution                 |
| `snapshot.json`           | VM state capture (stack, registers, tier depth)              |
| `symbol_table.json`       | Symbolic tag resolution for AI opcode decisions              |
| `build.meta.json`         | Compiler pipeline metadata (pass timings, symbol maps)       |
| `guardian.alert.json`     | Future anomaly and security alert log from Guardian AI       |

---

## 📚 Metadata Lifecycle

1. **Creation**:
   - Triggered during compile, interpret, optimize, or runtime execution.
   - Generated by Axion kernel hooks, compiler stack, or disassembler.

2. **Retention**:
   - Retained indefinitely unless explicitly pruned by the user.
   - Can be summarized, versioned, and exported (`.meta.tar.gz`).

3. **Export Formats**:
   - JSON (default)
   - XML, YAML (convertible)
   - PDF snapshot export via `logviewer.cweb`

4. **Security Properties**:
   - All `.json` metadata is hashed and included in the local Axion metadata blockchain.
   - Metadata is *read-only* for AI after creation, unless AI is in Learning Mode.

---

## 🔄 AI Metadata Usage

- Used by Axion to:
  - Identify entropy spikes
  - Reconstruct rollback candidates
  - Suggest opcode promotion/demotion via symbolic signatures
  - Reorganize `.cwebpkg` during package optimization
- Used by `FrameSceneBuilder.cweb` and `Looking Glass` for visual overlays
- Read by `t81lang_compiler.cweb` to infer symbol resolution at compile-time

---

## ⚙️ Integration Points

| Module                      | Metadata Hook Used             |
|-----------------------------|---------------------------------|
| `axion-ai.cweb`             | `axion_log_metadata()`          |
| `disassembler.cweb`         | `log_entropy_trace()`           |
| `t81lang_compiler.cweb`     | `emit_build_meta()`            |
| `recursive_tier_execution`  | `log_tier_shift()`             |
| `logviewer.cweb`            | `parse_and_render_metadata()`  |

---

## 🔐 Permissions & Integrity

- Metadata cannot be imported without Axion signature verification.
- Logs and metadata may be shared **only** with explicit user approval.
- All Learning Mode decisions are logged and versioned.
- Axion will reject malformed metadata and issue a `guardian.alert.json`.

---

## 🧬 Future Enhancements

- AI fingerprinting of optimization patterns
- AI cluster consensus voting on entropy signatures
- Export/import of symbolic decision graphs
- Unified `.meta.bundle` compression format

---

> AI should not only optimize your code—it should explain its decisions, and never hide them.

